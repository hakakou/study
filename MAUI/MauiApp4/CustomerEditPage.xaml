<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:local="clr-namespace:MauiApp4.ViewModels"
             x:Class="MauiApp4.CustomerEditPage"
             x:DataType="local:CustomerEditViewModel"
             Title="Customer Details">

    <ContentPage.Triggers>
        <DataTrigger Binding="{Binding Item.IsActive}" Value="True" TargetType="ContentPage">
            <Setter Property="Title" Value="ACTIVE Customer"/>
        </DataTrigger>
    </ContentPage.Triggers>

    <ContentPage.ToolbarItems>
        <ToolbarItem Text="Edit" 
                     Command="{Binding ShowEditFormCommand}"
                     Order="Primary"
                     Priority="0" />

        <ToolbarItem Text="Delete" 
                     Command="{Binding DeleteCommand}"
                     Order="Primary"
                     Priority="1">
            <ToolbarItem.IconImageSource>
                <FontImageSource Glyph="ðŸ—‘ï¸" Color="{StaticResource Primary}" Size="22" />
            </ToolbarItem.IconImageSource>
        </ToolbarItem>

        <ToolbarItem Text="Share" 
                     Command="{Binding ShareCommand}"
                     Order="Primary"
                     Priority="2">
            <ToolbarItem.IconImageSource>
                <FontImageSource Glyph="â†—ï¸" Color="{StaticResource Primary}" Size="22" />
            </ToolbarItem.IconImageSource>
        </ToolbarItem>

        <ToolbarItem Text="Refresh" 
                     Command="{Binding RefreshCommand}"
                     Order="Secondary"
                     Priority="0" />

        <ToolbarItem Text="Export" 
                     Command="{Binding ExportCommand}"
                     Order="Secondary"
                     Priority="1" />

        <ToolbarItem Text="Settings" 
                     Command="{Binding SettingsCommand}"
                     Order="Secondary"
                     Priority="2" />
    </ContentPage.ToolbarItems>

    <ScrollView>
        <VerticalStackLayout Spacing="20" Padding="20">

            <Label 
                Text="Customer Details" 
                Style="{StaticResource Headline}"
                SemanticProperties.HeadingLevel="Level1" />

            <Label 
                Text="View customer information" 
                Style="{StaticResource SubHeadline}"
                SemanticProperties.HeadingLevel="Level2" />

            <!-- Customer Information -->
            <Border Padding="15" StrokeThickness="2" StrokeShape="RoundRectangle 10,10,10,10">
                <Grid RowDefinitions="Auto,Auto,Auto,Auto,Auto" ColumnDefinitions="Auto,*" RowSpacing="10" ColumnSpacing="10">
                    <Label Grid.Row="0" Grid.Column="0" Text="First Name:" VerticalOptions="Center" />
                    <Entry Grid.Row="0" Grid.Column="1" Text="{Binding Item.FirstName}" Placeholder="Enter first name" />

                    <Label Grid.Row="1" Grid.Column="0" Text="Last Name:" VerticalOptions="Center" />
                    <Entry Grid.Row="1" Grid.Column="1" Text="{Binding Item.LastName}" Placeholder="Enter last name" />

                    <Label Grid.Row="2" Grid.Column="0" Text="Email:" VerticalOptions="Center" />
                    <Entry Grid.Row="2" Grid.Column="1" Text="{Binding Item.Email}" Placeholder="Enter email" Keyboard="Email" />

                    <Label Grid.Row="3" Grid.Column="0" Text="Phone:" VerticalOptions="Center" />
                    <Entry Grid.Row="3" Grid.Column="1" Text="{Binding Item.Phone}" Placeholder="Enter phone" Keyboard="Telephone" />

                </Grid>
            </Border>

            <!-- Status -->
            <Border Padding="15" StrokeThickness="2" StrokeShape="RoundRectangle 10,10,10,10">
                <HorizontalStackLayout Spacing="10" VerticalOptions="Center">
                    <Label Text="Active Status:" VerticalOptions="Center" />
                    <Switch IsToggled="{Binding Item.IsActive}" />
                </HorizontalStackLayout>
            </Border>

            <!-- Action Buttons -->
            <Grid ColumnDefinitions="*,*,*" ColumnSpacing="10">
                <Button Grid.Column="0" Text="Save" Command="{Binding SaveCommand}" />

                <Button Text="Cancel" Grid.Column="1"  Command="{Binding CancelCommand}"
						BackgroundColor="{StaticResource Gray200}"
					  />
                <ActivityIndicator VerticalOptions="Center"
								   WidthRequest="40" HeightRequest="40"
								   Color="{StaticResource Black}" 
								   IsRunning="{Binding SaveCommand.IsRunning}" />
            </Grid>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
